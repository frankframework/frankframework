<div class="ibox float-e-margins">
  @if (messageLog[selectedConfiguration]) {
    <div
      tabindex="0"
      role="button"
      data-cy="configuration-messages__box"
      class="ibox-title pointer"
      [ngClass]="{
        warning: messageLog[selectedConfiguration].messageLevel === 'WARN',
        danger: messageLog[selectedConfiguration].messageLevel === 'ERROR',
      }"
      (click)="msgBoxExpanded = !msgBoxExpanded"
    >
      <div class="ibox-tools pull-right">
        <a> <fa-icon [icon]="msgBoxExpanded ? faChevronUp : faChevronDown" /></a>
      </div>
      <div class="row full-width">
        <div class="col-lg-6 col-md-12 clear">
          <h4>Configuration Messages</h4>
        </div>
      </div>
    </div>
  }
  <div class="ibox-content p-w-sm" [hidden]="!msgBoxExpanded">
    <div class="row">
      <div class="col-md-12" style="padding: 0 1px">
        <div class="table-responsive">
          <table class="table table-striped table-nohead m-b-none">
            <tbody>
              @if (messageLog[selectedConfiguration] !== null) {
                @for (message of getMessageLog(selectedConfiguration); track message.date) {
                  <tr
                    [ngClass]="{
                      'text-warning': message.level === 'WARN',
                      'text-danger': message.level === 'ERROR',
                    }"
                  >
                    <td class="text-center" style="width: 40px">
                      <i
                        class="m-l-md fa"
                        [ngClass]="{
                          'fa-info': message.level === 'INFO',
                          'fa-warning': message.level === 'WARN',
                          'fa-times': message.level === 'ERROR',
                        }"
                      ></i>
                    </td>
                    <td class="text-center" style="width: 200px">
                      <span appToDate [time]="message.date"></span>
                    </td>
                    <td data-cy="configuration-messages__table__message">{{ message.message }}</td>
                  </tr>
                }
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
