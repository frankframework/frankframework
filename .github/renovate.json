{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended",
        "helpers:pinGitHubActionDigests",
        ":configMigration",
        "security:minimumReleaseAgeNpm"
    ],
    "dependencyDashboardApproval": true,
    "baseBranchPatterns": [
        "master",
        "/^release\\/9\\./",
        "/^release\\/8\\.0$/",
        "/^release\\/10\\./"
    ],
    "labels": [
        "Dependencies"
    ],
    "ignoreDeps": [
        "pnpm",
        "org.eclipse.m2e:lifecycle-mapping",
        "com.eclipsesource.j2v8:j2v8_linux_x86_64"
    ],
    "prHourlyLimit": 10,
    "rebaseWhen": "conflicted",
    "commitMessageTopic": "{{depName}}",
    "commitMessageAction": "Update",
    "commitMessageExtra": "to {{#if isMajor}}v{{newMajor}}{{else}}v{{newVersion}}{{/if}}",
    "commitMessageSuffix": "",
    "packageRules": [
        {
            "description": "Release branches - disable ALL regular updates (only security/CVE updates via vulnerabilityAlerts)",
            "matchManagers": [
                "npm",
                "maven"
            ],
            "matchBaseBranches": [
                "release/**"
            ],
            "matchFileNames": [
                "!docker/**"
            ],
            "enabled": false
        },
        {
            "description": "Maven dependencies - daily at 6 AM, ignore major updates",
            "matchManagers": [
                "maven"
            ],
            "matchFileNames": [
                "!docker/**"
            ],
            "schedule": [
                "* 0-6 * * *"
            ],
            "addLabels": [
                "Java"
            ],
            "ignoreDeps" : [
                "software.amazon.awssdk:bom"
            ],
            "groupName": "maven-dependencies",
            "separateMajorMinor": true,
            "separateMinorPatch": true,
            "major": {
                "enabled": false
            }
        },
        {
            "description": "Banned dependencies for ... <= 8.0",
            "matchManagers": [
                "maven",
            ],
            "matchBaseBranches": [
                "release/8.0",
            ],
            "matchPackageNames": [
                "org.apache.tika:tika-parsers",
                "org.springframework.boot:spring-boot-loader",
                "org.springframework:spring-webmvc",
                "org.springframework:spring-web",
                "org.springframework:spring-core",
                "org.springframework:spring-context"
            ],
            "enabled": false
        },
        {
            "description": "Ignore specific Maven dependencies",
            "matchManagers": [
                "maven"
            ],
            "matchPackageNames": [
                "org.ibissource:ibis-ladybug",
                "org.wearefrank:ladybug",
                "com.sap.jco3:sapidoc",
                "org.filesys:jfileserver-enterprise",
                "org.eclipse.m2e:lifecycle-mapping",
                "com.eclipsesource.j2v8:j2v8_linux_x86_64",
                "/^com\\.aspose:/"
            ],
            "enabled": false
        },
        {
            "description": "All NPM dependencies - monthly schedule, ignore major updates (base rule)",
            "matchManagers": [
                "npm"
            ],
            "schedule": [
                "before 6am on the first day of the month"
            ],
            "addLabels": [
                "JavaScript"
            ],
            "groupName": "npm-dependencies",
            "separateMajorMinor": true,
            "major": {
                "enabled": false
            }
        },
        {
            "description": "Angular packages - override groupName",
            "matchManagers": [
                "npm"
            ],
            "groupName": "Angular",
            "matchPackageNames": [
                "/^@angular/",
                "zone.js"
            ]
        },
        {
            "description": "ESLint packages - override groupName",
            "matchManagers": [
                "npm"
            ],
            "groupName": "ES Lint",
            "matchPackageNames": [
                "/(^eslint)|(^@eslint/)/"
            ]
        },
        {
            "description": "Ignore NPM peer dependencies",
            "matchDepTypes": [
                "peerDependencies"
            ],
            "enabled": false
        },
        {
            "description": "Docker dependencies - daily schedule, group all updates",
            "matchManagers": [
                "dockerfile",
                "docker-compose"
            ],
            "matchFileNames": [
                "docker/**"
            ],
            "matchBaseBranches": [
                "master"
            ],
            "schedule": [
                "* 0-6 * * *"
            ],
            "addLabels": [
                "Docker"
            ],
            "groupName": "Docker",
        },
        {
            "description": "Docker dependencies (for LTS) - daily schedule, group all updates",
            "matchManagers": [
                "dockerfile",
                "docker-compose"
            ],
            "matchFileNames": [
                "docker/**"
            ],
            "matchBaseBranches": [
                "/^release\\/9\\.0$/",
                "/^release\\/8\\.0$/",
                "/^release\\/10\\./"
            ],
            "schedule": [
                "* 0-6 * * *"
            ],
            "addLabels": [
                "Docker",
                "{{replace 'release/' '' baseBranch}}"
            ],
            "groupName": "Docker (LTS)",
            "separateMajorMinor": false
        },
        {
            "description": "GitHub Actions - weekly schedule, group all updates",
            "matchManagers": [
                "github-actions"
            ],
            "schedule": [
                "before 6am on the first day of the week"
            ],
            "addLabels": [
                "CI/CD"
            ],
            "groupName": "github-actions",
            "separateMajorMinor": false
        }
    ],
    "lockFileMaintenance": {
        "enabled": false
    },
    "vulnerabilityAlerts": {
        "enabled": true,
        "vulnerabilityFixStrategy": "highest",
        "dependencyDashboardApproval": true,
        "commitMessageSuffix": "",
        "labels": [
            "Security",
            "Dependencies"
        ],
        "addLabels": [
            "CVE",
            "{{replace 'release/' '' baseBranch}}"
        ],
        "ignoreDeps": [
            "com.oracle.database.jdbc:ojdbc11",
            "com.h2database:h2",
            "com.microsoft.sqlserver:mssql-jdbc",
            "com.mysql:mysql-connector-j",
            "org.mariadb.jdbc:mariadb-java-client",
            "org.postgresql:postgresql",
            "com.ibm.db2:jcc",
            "org.apache.activemq:artemis-jakarta-client-all",
            "org.apache.activemq:activemq-client",
            "com.rabbitmq:amqp-client",
            "com.rabbitmq.jms:rabbitmq-jms",
            "org.apache.kafka:kafka-clients",
            "bootstrap",
            "mermaid",
        ]
    },
    "osvVulnerabilityAlerts": true,
    "rangeStrategy": "bump"
}
